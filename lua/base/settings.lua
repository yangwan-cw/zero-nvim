-- ~/.config/nvim/lua/base/settings.lua
local opt = vim.opt
-- ~/.config/nvim/lua/base/settings.lua
-- 编辑器核心功能设置

local opt = vim.opt
local o = vim.o
local bo = vim.bo
local g = vim.g

-- ============================================
-- 字符编码设置
-- ============================================
g.encoding = "UTF-8"              -- Vim 内部使用的字符编码方式
o.fileencoding = "utf-8"          -- 文件保存时的字符编码

-- ============================================
-- 滚动和光标行为
-- ============================================
o.scrolloff = 8                   -- 垂直滚动时，光标距离顶部/底部的行数（上下留出8行）
o.sidescrolloff = 8               -- 水平滚动时，光标距离左右边缘的列数（左右留出8列）

-- ============================================
-- 行为和换行
-- ============================================
o.whichwrap = '<,>,[,]'           -- 允许在行首行尾使用方向键和 h,l 跳转到上一行/下一行
                                  -- < > 是方向键，[ ] 是 insert 模式下的左右键

-- ============================================
-- 缓冲区和文件管理
-- ============================================
o.hidden = true                   -- 允许在未保存的缓冲区之间切换（切换buffer时不强制保存）
o.autoread = true                 -- 文件在外部被修改后自动重新读取
bo.autoread = true                -- buffer 级别的自动读取设置

-- ============================================
-- 备份和交换文件
-- ============================================
o.backup = false                  -- 禁止创建备份文件（filename~）
o.writebackup = false             -- 保存文件前不创建备份
o.swapfile = false                -- 禁止创建交换文件（.swp），避免编辑冲突提示

-- ============================================
-- 缩进设置
-- ============================================
o.tabstop = 2                     -- Tab 键的宽度（显示为2个空格）
bo.tabstop = 2                    -- buffer 局部设置
o.softtabstop = 2                 -- 按下 Tab 键时插入的空格数
o.shiftwidth = 2                  -- 自动缩进和 >> << 移动的宽度
bo.shiftwidth = 2                 -- buffer 局部设置
o.shiftround = true               -- 使用 >> << 缩进时，取整到 shiftwidth 的倍数
o.expandtab = true                -- 将 Tab 转换为空格
bo.expandtab = true               -- buffer 局部设置
o.autoindent = true               -- 新行自动缩进，保持和上一行相同的缩进
bo.autoindent = true              -- buffer 局部设置
o.smartindent = true              -- 智能缩进（在 { 后自动增加缩进）

-- ============================================
-- 搜索设置
-- ============================================
o.ignorecase = true               -- 搜索时忽略大小写
o.smartcase = true                -- 如果搜索词包含大写字母，则区分大小写
o.hlsearch = false                -- 搜索时不高亮所有匹配项（避免干扰）
o.incsearch = true                -- 输入搜索词时实时显示匹配结果（增量搜索）

-- ============================================
-- 性能和时间设置
-- ============================================
o.updatetime = 300                -- 触发 CursorHold 事件的等待时间（毫秒）
                                  -- 影响 swap 文件写入和一些插件的响应速度
o.timeoutlen = 500                -- 等待键盘快捷键组合输入的超时时间（毫秒）
                                  -- 例如：按下 leader 键后，等待500ms输入下一个键

-- ============================================
-- 补全菜单设置
-- ============================================
g.completeopt = "menu,menuone,noselect,noinsert"
                                  -- 补全选项：
                                  -- menu: 使用弹出菜单显示补全
                                  -- menuone: 只有一个匹配项时也显示菜单
                                  -- noselect: 不自动选择补全项
                                  -- noinsert: 不自动插入匹配文本

o.wildmenu = true                 -- 命令行补全时显示增强菜单
o.pumheight = 10                  -- 补全菜单最多显示10行

-- ============================================
-- 消息和提示
-- ============================================
o.shortmess = o.shortmess .. 'c'  -- 不显示补全菜单的额外消息（如 "匹配 1/10"）
o.cmdheight = 2                   -- 命令行高度为2行，提供更多显示空间

-- ============================================
-- 分割窗口行为
-- ============================================
o.splitbelow = true               -- 水平分割时新窗口在下方
o.splitright = true               -- 垂直分割时新窗口在右侧

-- ============================================
-- 鼠标支持
-- ============================================
o.mouse = "a"                     -- 在所有模式下启用鼠标支持
                                  -- a = all modes (normal, visual, insert, command)
